<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Valentine</title>

<style>
  :root{
    --pink1:#ff9ecb;
    --pink2:#ff4d6d;
    --white:#fff;
  }
  *{ box-sizing:border-box; }

  body{
    margin:0;
    min-height:100vh;
    font-family:Arial, sans-serif;
    color:white;
    background:linear-gradient(45deg,var(--pink1),var(--pink2));
    overflow:hidden;

    display:flex;
    align-items:center;
    justify-content:center;
    padding: 20px 14px calc(20px + env(safe-area-inset-bottom));
  }

  .card{
    width:min(420px, 100%);
    text-align:center;
    padding: 18px 16px 22px;
    border-radius:18px;
    background: rgba(255,255,255,0.14);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: 0 12px 30px rgba(0,0,0,0.18);
  }

  h2{
    margin: 6px 0 8px;
    font-size: clamp(18px, 4.8vw, 22px);
    line-height:1.25;
    font-weight:700;
  }

  h3{
    margin: 0 0 14px;
    font-size: clamp(14px, 4vw, 18px);
    font-weight:600;
    opacity:0.95;
  }

  .btn{
    width: 100%;
    padding: 14px 16px;
    font-size: 16px;
    border: none;
    border-radius: 14px;
    cursor: pointer;
    margin: 8px 0;
    font-weight:700;
  }

  #play{
    background: var(--white);
    color: var(--pink2);
  }

  /* Two fixed columns: overlap becomes impossible */
  .row{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin-top: 8px;
    align-items:stretch;
  }

  #yes{
    background: var(--white);
    color: var(--pink2);
  }

  /* No button stays in its own cell; we only translate it inside that cell */
  .noWrap{
    position:relative;
    overflow:hidden;         /* keeps the No button inside its half */
    border-radius:14px;
  }

  #no{
    background:#e9e9e9;
    color:#333;
    margin:0;                /* remove margins to fit wrapper */
    height: 52px;
    transform: translate(0,0) scale(1);
    transition: transform 120ms ease;
    touch-action: manipulation;
  }

  .hint{
    margin-top: 10px;
    font-size: 12px;
    opacity: 0.85;
  }

  .hearts{
    position:fixed;
    font-size:24px;
    animation:float 3s linear infinite;
    pointer-events:none;
  }

  @keyframes float{
    from{ transform:translateY(110vh); }
    to{ transform:translateY(-10vh); }
  }

  .success{
    font-size: clamp(26px, 7vw, 38px);
    margin: 0;
    padding: 18px 0 0;
  }
</style>
</head>

<body>

  <div class="card">
    <div id="content">
      <h2>Hey TT, Thank you for not letting me spend another Valantine alone.</h2>
      <h3>Will you be my Valentine?</h3>

      <button class="btn" id="play" onclick="playMusic()">Play Me üéµ</button>

      <div class="row" id="row">
        <button class="btn" id="yes" onclick="yes()">Yes</button>

        <!-- No button is trapped inside its own half -->
        <div class="noWrap" id="noWrap">
          <button class="btn" id="no">No</button>
        </div>
      </div>

      <div class="hint">Tip: Tap ‚ÄúPlay Me‚Äù first (phones block autoplay).</div>
    </div>
  </div>

  <audio id="music" src="Edd_Sheeran_-_Perfect_(mp3.pm).mp3" loop></audio>

<script>
  const noBtn   = document.getElementById("no");
  const noWrap  = document.getElementById("noWrap");

  let scale = 1;
  let tx = 0, ty = 0;

  function moveNoWithinCell(){
    // Keep within the wrapper bounds so it can never overlap "Yes"
    const wrapRect = noWrap.getBoundingClientRect();
    const btnRect  = noBtn.getBoundingClientRect();

    // available travel space inside the cell
    const maxX = Math.max(0, wrapRect.width  - btnRect.width);
    const maxY = Math.max(0, wrapRect.height - btnRect.height);

    tx = (Math.random() * maxX);
    ty = (Math.random() * maxY);

    noBtn.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;
  }

  // Touch + mouse friendly
  noBtn.addEventListener("pointerenter", moveNoWithinCell);

  noBtn.addEventListener("pointerdown", () => {
    scale -= 0.12;
    if(scale < 0.35) scale = 0.35;
    moveNoWithinCell();
  });

  function playMusic(){
    const music = document.getElementById("music");
    music.volume = 0.85;

    music.play().then(() => {
      const playBtn = document.getElementById("play");
      playBtn.textContent = "Playing üé∂";
      playBtn.disabled = true;
      playBtn.style.opacity = "0.85";
      playBtn.style.cursor = "default";
    }).catch((e) => {
      console.log("Playback blocked:", e);
    });
  }

  function yes(){
    document.getElementById("content").innerHTML =
      '<h1 class="success">You are the best Tiba ‚ù§Ô∏èüéâ</h1>';

    setInterval(()=>{
      const heart=document.createElement("div");
      heart.className="hearts";
      heart.style.left=Math.random()*100+"vw";
      heart.textContent="‚ù§Ô∏è";
      document.body.appendChild(heart);
      setTimeout(()=>heart.remove(),3000);
    },180);
  }
</script>

</body>
</html>